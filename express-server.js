const express = require('express');
const morgan = require('morgan');

const movieVillainsRoutes = require('./routes/movie-villains');

/////////////////////////////////////////////////////////////////////////////////
// Set-up
/////////////////////////////////////////////////////////////////////////////////

const app = express();
const PORT = 5050;

app.set('view engine', 'ejs');

/////////////////////////////////////////////////////////////////////////////////
// Middleware
/////////////////////////////////////////////////////////////////////////////////

app.use(morgan('dev'));
app.use(express.urlencoded({extended: true}));

/////////////////////////////////////////////////////////////////////////////////
// Listener
/////////////////////////////////////////////////////////////////////////////////

app.listen(PORT, () => console.log(
    'Express app now listening on port:', PORT
));

/////////////////////////////////////////////////////////////////////////////////
// Routes
/////////////////////////////////////////////////////////////////////////////////

app.get('/test', (req, res) => {
    res.status(200).end('<p>Hello, World!</p>');
});

// Bring in movie villains routes from file.
app.use('/movie-villains', movieVillainsRoutes);
